generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Payslip {
  id            String   @id @default(cuid())
  fileName      String
  fileUrl       String
  fileSize      Int      // en bytes
  mimeType      String
  
  // Données extraites
  employeeName  String?
  employerName  String?
  periodMonth   Int?     @db.SmallInt // 1-12
  periodYear    Int?     @db.SmallInt // ex: 2024
  
  // Montants
  netToPay      Float    @db.DoublePrecision
  grossSalary   Float    @db.DoublePrecision
  taxAmount     Float    @db.DoublePrecision
  hoursWorked   Float    @db.DoublePrecision
  
  // JSON brut de l'extraction
  extractedJson Json
  
  // Métadonnées
  processingStatus String  @default("completed") // completed | failed | processing
  errorMessage     String?
  
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  @@index([periodYear, periodMonth])
  @@index([createdAt])
  @@index([processingStatus])
}
